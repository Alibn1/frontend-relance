<div class="event-history-wrapper">
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <ng-container *ngIf="!isLoading && events.length > 0">
    <div *ngFor="let event of events" class="event-card-compact mat-elevation-z1">

      <!-- Ligne 1 : Identifiant à gauche, meta à droite -->
      <div class="event-header">
        <div class="event-step">{{ event.numero_relance }}</div>
        <div class="event-meta">
          <span class="event-meta-item">
            <mat-icon>person</mat-icon> {{ event.user_creation || '-' }}
          </span>
          <span class="event-meta-item">
            <mat-icon>calendar_today</mat-icon> {{ event.formattedDate }}
          </span>
        </div>
      </div>

      <!-- Ligne 2 : Observation -->
      <div class="event-body">
        <div class="event-line">
          <mat-icon>chat</mat-icon>
          <span>{{ event.observation || 'Aucune observation' }}</span>
        </div>
        <div class="event-type">Statut Relance : <em>{{ getLibelleFromStatut(event.statut) || '-' }}</em></div>
      </div>

    </div>
  </ng-container>
</div>
